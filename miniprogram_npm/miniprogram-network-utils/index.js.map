{"version":3,"sources":["index.js","promise.finally.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/// <reference lib=\"es5\"/>\r\n/// <reference lib=\"es2015.core\"/>\r\n// tslint:disable-next-line:no-import-side-effect\r\nrequire(\"./promise.finally\");\r\n/**\r\n * 构建url参数\r\n * /users/{id} ==> /users/123\r\n * @param url - url 相对地址或者绝对地址\r\n * @param params - Obejct 键值对 替换的参数列表\r\n * @param baseUrl - 根目录，当url以https://或者http://开头忽略此参数\r\n * @returns 完整参数URL\r\n */\r\nfunction buildParams(url, params, baseUrl) {\r\n    if (url && params) {\r\n        Object.keys(params)\r\n            .forEach(function (key) {\r\n            // tslint:disable-next-line:no-parameter-reassignment prefer-type-cast\r\n            url = url.replace(new RegExp(\"{\" + key + \"}\", 'g'), params[key]);\r\n        });\r\n    }\r\n    // tslint:disable-next-line:no-http-string\r\n    if (url && (url.startsWith('https://') || url.startsWith('http://'))) {\r\n        return url;\r\n    }\r\n    else {\r\n        return (baseUrl || '') + url;\r\n    }\r\n}\r\nexports.buildParams = buildParams;\r\n/**\r\n * 合并公共配置\r\n * @param data - new configuration for wechat operation\r\n * @param options - default global configuration\r\n * @param extendKeys - key need copy to data\r\n */\r\nfunction getCommonOptions(data, options, extendKeys) {\r\n    ['expire'].concat(extendKeys).forEach(function (v) {\r\n        if (options[v] !== undefined) {\r\n            // tslint:disable-next-line: no-unsafe-any\r\n            data[v] = options[v];\r\n        }\r\n    });\r\n    return data;\r\n}\r\nexports.getCommonOptions = getCommonOptions;\r\n//# sourceMappingURL=index.js.map","\r\nif (!Promise.prototype.finally) {\r\n    Promise.prototype.finally = function (onfinally) {\r\n        if (onfinally) {\r\n            var P_1 = this.constructor;\r\n            // tslint:disable\r\n            return this.then(function (value) { return P_1.resolve(onfinally()).then(function () { return value; }); }, function (reason) { return P_1.resolve(onfinally()).then(function () { throw reason; }); });\r\n        }\r\n        else {\r\n            return this;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=promise.finally.js.map"]}